# 项目简述

本项目为“酒馆助手”脚本模板与示例集合。当前目标：实现并落地“好感事件触发（增强版）”机制——当角色好感度到达阶段阈值时，先更新角色的好感事件阶段，再在世界随机事件为空闲时，设置好感事件名并保证一次性触发。

## 目标与范围
- 角色：伊吹紫音、梦咲凛、赤城枫（`紫音/凛/枫`）
- 阈值→阶段：`50→1`、`100→2`、`150→3`
- 行为：
  - 单调递增地同步 `stat_data.<角色>.好感事件[0]` 阶段
  - 当 `stat_data.世界.随机事件[0] === '无'` 时触发未触发的最低阶段事件
  - 每个角色每阶段仅触发一次（脚本变量域去重）

## 输出
- 代码：`src/好感事件触发/index.ts`（监听 `mag_variable_update_ended`）
- 文档：`src/好感事件触发/README.md`（规则、路径、定制点）

## 约束
- 优先使用酒馆助手提供的全局函数/变量与 lodash
- 变量路径遵循 `stat_data` 命名
- 加载/卸载钩子参考 jQuery 写法（无 DOMContentLoaded）

# 项目简述

本次任务为“好感事件触发器”脚本：当角色好感度达到指定阈值（50、100、150）时，若且仅当 `世界.随机事件[0] === '无'`，将其设置为一次性事件名；每个阈值每名角色仅能触发一次。

目标：
- 监听变量更新周期，在合适时机写入 `世界.随机事件[0]`。
- 保证幂等性（同一阈值仅触发一次）。
- 遵循酒馆助手接口与变量访问最佳实践。

交付物：
- 代码：`src/好感事件触发/index.ts`。
- 文档：`src/好感事件触发/README.md`。
- 构建入口：在 `config.yaml` 中加入脚本入口。

范围外：
- 不修改已有角色与世界结构定义（保持 `$meta.extensible:false` 区域不被扩展）。
- 不接入第三方框架，除内置 lodash 外不新增依赖。

# 项目简介

## 项目概述
酒馆助手模板项目是一个为SillyTavern等AI聊天平台提供脚本和界面开发支持的工具集。该项目提供了完整的TypeScript开发环境，包括类型定义、构建工具和示例代码。

## 核心目标
1. **脚本开发支持** - 为酒馆助手提供类型安全的脚本开发环境
2. **界面开发支持** - 提供界面模板和示例，支持自定义UI开发
3. **变量管理** - 提供完整的变量操作接口，支持角色卡变量、聊天变量等
4. **事件系统** - 支持变量更新事件监听和处理
5. **最佳实践** - 提供开发规范和示例代码

## 技术栈
- **TypeScript** - 主要开发语言
- **Webpack** - 构建工具
- **jQuery** - DOM操作和事件处理
- **Lodash** - 工具函数库
- **SCSS** - 样式预处理
- **ESLint** - 代码质量检查

## 项目结构
- `@types/` - TypeScript类型定义
- `src/` - 源代码目录
  - `脚本示例/` - 脚本开发示例
  - `界面示例/` - 界面开发示例
  - `脚本模板/` - 脚本开发模板
  - `界面模板/` - 界面开发模板
- `实时修改导入用模板/` - 实时修改导入模板

## 开发规范
1. 优先使用酒馆助手提供的接口函数
2. 使用jQuery进行DOM操作
3. 遵循TypeScript类型安全原则
4. 参考现有示例代码的开发模式
