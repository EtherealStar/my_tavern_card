var __webpack_modules__ = {
  "./src/shared/constants.ts": 
  /*!*********************************!*\
  !*** ./src/shared/constants.ts ***!
  \*********************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RANDOM_EVENT_PATH: () => (/* binding */ RANDOM_EVENT_PATH),\n/* harmony export */   TRIGGERED_RANDOM_EVENTS_PATH: () => (/* binding */ TRIGGERED_RANDOM_EVENTS_PATH),\n/* harmony export */   updateUserKey: () => (/* binding */ updateUserKey),\n/* harmony export */   userKey: () => (/* binding */ userKey)\n/* harmony export */ });\nconst RANDOM_EVENT_PATH = 'stat_data.世界.随机事件[0]';\n/**\n * 获取用户键名，支持多种回退机制\n */\nfunction getUserKey() {\n    try {\n        // 尝试使用 substitudeMacros 函数\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (typeof substitudeMacros === 'function') {\n            const result = substitudeMacros('<user>');\n            if (result && result !== '<user>' && typeof result === 'string') {\n                console.log('[Constants] 使用 substitudeMacros 获取用户键:', result);\n                return result;\n            }\n        }\n        // 回退1: 尝试从酒馆助手变量获取\n        if (typeof window.getVariables === 'function') {\n            const vars = window.getVariables({ type: 'global' });\n            const userName = vars?.user_name || vars?.username;\n            if (userName && typeof userName === 'string') {\n                console.log('[Constants] 从全局变量获取用户键:', userName);\n                return userName;\n            }\n        }\n        // 回退2: 尝试从SillyTavern获取\n        const st = window.SillyTavern;\n        if (st?.name1) {\n            console.log('[Constants] 从SillyTavern获取用户键:', st.name1);\n            return st.name1;\n        }\n        // 回退3: 从聊天消息中推断用户名\n        if (typeof window.getChatMessages === 'function') {\n            try {\n                const messages = window.getChatMessages();\n                const userMessage = messages.find((msg) => msg.is_user);\n                if (userMessage?.name) {\n                    console.log('[Constants] 从聊天消息推断用户键:', userMessage.name);\n                    return userMessage.name;\n                }\n            }\n            catch {\n                // ignore\n            }\n        }\n        // 最终回退: 使用默认值\n        console.warn('[Constants] 无法获取用户键，使用默认值: <user>');\n        return '<user>';\n    }\n    catch (error) {\n        console.error('[Constants] 获取用户键时发生错误:', error);\n        return '<user>';\n    }\n}\n// 延迟获取用户键，确保在需要时才计算\nlet userKey = '<user>';\n// 提供动态更新用户键的函数\nfunction updateUserKey() {\n    userKey = getUserKey();\n    return userKey;\n}\n// 在模块加载时尝试获取一次\ntry {\n    userKey = getUserKey();\n}\ncatch {\n    // ignore\n}\nconst TRIGGERED_RANDOM_EVENTS_PATH = 'tavern_helper.random_events.triggered';\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNLENBQUM7SUFDUCxTQUFTO0FBQ1gsQ0FBQztBQUNNLE1BQU0sNEJBQTRCLEdBQUcsdUNBQXVDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL3NoYXJlZC9jb25zdGFudHMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBSQU5ET01fRVZFTlRfUEFUSCA9ICdzdGF0X2RhdGEu5LiW55WMLumaj+acuuS6i+S7tlswXSc7XHJcblxyXG4vKipcclxuICog6I635Y+W55So5oi36ZSu5ZCN77yM5pSv5oyB5aSa56eN5Zue6YCA5py65Yi2XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVc2VyS2V5KCk6IHN0cmluZyB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIOWwneivleS9v+eUqCBzdWJzdGl0dWRlTWFjcm9zIOWHveaVsFxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgaWYgKHR5cGVvZiBzdWJzdGl0dWRlTWFjcm9zID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHN1YnN0aXR1ZGVNYWNyb3MoJzx1c2VyPicpO1xyXG4gICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdCAhPT0gJzx1c2VyPicgJiYgdHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0NvbnN0YW50c10g5L2/55SoIHN1YnN0aXR1ZGVNYWNyb3Mg6I635Y+W55So5oi36ZSuOicsIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWbnumAgDE6IOWwneivleS7jumFkummhuWKqeaJi+WPmOmHj+iOt+WPllxyXG4gICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0VmFyaWFibGVzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNvbnN0IHZhcnMgPSAod2luZG93IGFzIGFueSkuZ2V0VmFyaWFibGVzKHsgdHlwZTogJ2dsb2JhbCcgfSk7XHJcbiAgICAgIGNvbnN0IHVzZXJOYW1lID0gdmFycz8udXNlcl9uYW1lIHx8IHZhcnM/LnVzZXJuYW1lO1xyXG4gICAgICBpZiAodXNlck5hbWUgJiYgdHlwZW9mIHVzZXJOYW1lID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbQ29uc3RhbnRzXSDku47lhajlsYDlj5jph4/ojrflj5bnlKjmiLfplK46JywgdXNlck5hbWUpO1xyXG4gICAgICAgIHJldHVybiB1c2VyTmFtZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOWbnumAgDI6IOWwneivleS7jlNpbGx5VGF2ZXJu6I635Y+WXHJcbiAgICBjb25zdCBzdCA9ICh3aW5kb3cgYXMgYW55KS5TaWxseVRhdmVybjtcclxuICAgIGlmIChzdD8ubmFtZTEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tDb25zdGFudHNdIOS7jlNpbGx5VGF2ZXJu6I635Y+W55So5oi36ZSuOicsIHN0Lm5hbWUxKTtcclxuICAgICAgcmV0dXJuIHN0Lm5hbWUxO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWbnumAgDM6IOS7juiBiuWkqea2iOaBr+S4reaOqOaWreeUqOaIt+WQjVxyXG4gICAgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuZ2V0Q2hhdE1lc3NhZ2VzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSAod2luZG93IGFzIGFueSkuZ2V0Q2hhdE1lc3NhZ2VzKCk7XHJcbiAgICAgICAgY29uc3QgdXNlck1lc3NhZ2UgPSBtZXNzYWdlcy5maW5kKChtc2c6IGFueSkgPT4gbXNnLmlzX3VzZXIpO1xyXG4gICAgICAgIGlmICh1c2VyTWVzc2FnZT8ubmFtZSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tDb25zdGFudHNdIOS7juiBiuWkqea2iOaBr+aOqOaWreeUqOaIt+mUrjonLCB1c2VyTWVzc2FnZS5uYW1lKTtcclxuICAgICAgICAgIHJldHVybiB1c2VyTWVzc2FnZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgLy8gaWdub3JlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmnIDnu4jlm57pgIA6IOS9v+eUqOm7mOiupOWAvFxyXG4gICAgY29uc29sZS53YXJuKCdbQ29uc3RhbnRzXSDml6Dms5Xojrflj5bnlKjmiLfplK7vvIzkvb/nlKjpu5jorqTlgLw6IDx1c2VyPicpO1xyXG4gICAgcmV0dXJuICc8dXNlcj4nO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbQ29uc3RhbnRzXSDojrflj5bnlKjmiLfplK7ml7blj5HnlJ/plJnor686JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuICc8dXNlcj4nO1xyXG4gIH1cclxufVxyXG5cclxuLy8g5bu26L+f6I635Y+W55So5oi36ZSu77yM56Gu5L+d5Zyo6ZyA6KaB5pe25omN6K6h566XXHJcbmV4cG9ydCBsZXQgdXNlcktleSA9ICc8dXNlcj4nO1xyXG5cclxuLy8g5o+Q5L6b5Yqo5oCB5pu05paw55So5oi36ZSu55qE5Ye95pWwXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVVc2VyS2V5KCk6IHN0cmluZyB7XHJcbiAgdXNlcktleSA9IGdldFVzZXJLZXkoKTtcclxuICByZXR1cm4gdXNlcktleTtcclxufVxyXG5cclxuLy8g5Zyo5qih5Z2X5Yqg6L295pe25bCd6K+V6I635Y+W5LiA5qyhXHJcbnRyeSB7XHJcbiAgdXNlcktleSA9IGdldFVzZXJLZXkoKTtcclxufSBjYXRjaCB7XHJcbiAgLy8gaWdub3JlXHJcbn1cclxuZXhwb3J0IGNvbnN0IFRSSUdHRVJFRF9SQU5ET01fRVZFTlRTX1BBVEggPSAndGF2ZXJuX2hlbHBlci5yYW5kb21fZXZlbnRzLnRyaWdnZXJlZCc7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/shared/constants.ts\n\n}");
  },
  "./src/随机事件触发/index.ts": 
  /*!*****************************!*\
  !*** ./src/随机事件触发/index.ts ***!
  \*****************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _shared_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/constants */ \"./src/shared/constants.ts\");\n\n// 事件池定义\nconst EVENT_POOL = [\n    { name: '姐姐的书架', allowedPeriods: ['上午', '下午'], allowedLocations: ['{{user}}的家'] },\n    { name: '不听话的咖啡机', allowedPeriods: ['上午'], allowedLocations: ['{{user}}的家'] },\n    { name: '蔬菜的转移', allowedPeriods: ['上午', '下午'], allowedLocations: ['守护支部'] },\n    { name: '天台的午餐', allowedPeriods: ['上午'], allowedLocations: ['花丘高中'] },\n    { name: '冰雕', allowedPeriods: ['下午'], allowedLocations: ['{{user}}的家'] },\n    { name: '晚高峰电车', allowedPeriods: ['下午'], allowedLocations: ['花丘高中'] },\n    { name: '图书馆的守护', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '出浴意外', allowedPeriods: ['下午', '晚间'], allowedLocations: ['{{user}}的家'] },\n    { name: '特别辅导', allowedPeriods: ['下午', '晚间'], allowedLocations: ['花丘高中'] },\n    { name: '雨天的伞下', allowedPeriods: ['下午', '晚间'], allowedLocations: ['花丘高中'] },\n    { name: '失窃的丝袜', allowedPeriods: ['下午', '晚间'], allowedLocations: ['{{user}}的家'] },\n    { name: '天台的午睡', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '旧伤疤的故事', allowedPeriods: ['下午'], allowedLocations: ['花丘高中'] },\n    { name: '家庭餐厅的紧急补习', allowedPeriods: ['下午', '晚间'] },\n    { name: '食堂的限定布丁争夺战', allowedPeriods: ['上午', '下午'], allowedLocations: ['守护支部'] },\n    { name: '输掉的惩罚', allowedLocations: ['{{user}}的家'] },\n    { name: '特训', allowedPeriods: ['上午', '下午'], allowedLocations: ['守护支部'] },\n    { name: '体育课', allowedPeriods: ['下午'], allowedLocations: ['花丘高中'] },\n    { name: 'VR游戏', allowedPeriods: ['下午', '晚间'] },\n    { name: '大姐头的房间', allowedPeriods: ['下午', '晚间'] },\n    { name: '被弄湿的教科书', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '迷路的小猫', allowedPeriods: ['下午', '晚间'] },\n    { name: '商业街的橱窗', allowedPeriods: ['下午', '晚间'] },\n    { name: '关于过去的噩梦', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '训练室的意外', allowedLocations: ['守护支部'] },\n    { name: '对决', allowedLocations: ['守护支部'] },\n    { name: '购物之旅', allowedPeriods: ['下午', '晚间'] },\n    { name: '更衣室的意外', allowedPeriods: ['下午'], allowedLocations: ['花丘高中'] },\n    { name: '小巷里的邀请', allowedPeriods: ['下午', '晚间'], allowedLocations: ['花丘高中'] },\n    { name: '雨夜的误会', allowedPeriods: ['下午', '晚间'], allowedLocations: ['花丘高中'] },\n    { name: '奢侈品店的插曲', allowedPeriods: ['下午', '晚间'] },\n    { name: '商业街的调戏', allowedPeriods: ['下午', '晚间'] },\n    { name: '迷路的女游客' },\n    { name: '后台突袭', allowedPeriods: ['下午', '晚间'] },\n    { name: '风纪注意', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '美术社的缪斯', allowedPeriods: ['上午', '下午'], allowedLocations: ['花丘高中'] },\n    { name: '夜间呻吟', allowedPeriods: ['晚间'], allowedLocations: ['{{user}}的家'] },\n    { name: '警官的关心', allowedPeriods: ['晚间'] },\n];\n// 工具函数\nfunction normalizeLocation(loc) {\n    return loc.replace(/{{user}}/g, _shared_constants__WEBPACK_IMPORTED_MODULE_0__.userKey);\n}\nfunction getCurrentPeriod(variables) {\n    return _.get(variables, 'stat_data.世界.时段[0]');\n}\nfunction getCurrentLocation(variables) {\n    return _.get(variables, `stat_data.${_shared_constants__WEBPACK_IMPORTED_MODULE_0__.userKey}.地点[0]`);\n}\n// 脚本域配置与状态\nconst RANDOM_EVENT_CONFIG_ROOT = '随机事件触发器.配置';\nconst RANDOM_EVENT_STATE_ROOT = '随机事件触发器.状态';\nfunction getCooldownReplies(scriptVars) {\n    const value = _.get(scriptVars, `${RANDOM_EVENT_CONFIG_ROOT}.冷却回复数`, 1);\n    return typeof value === 'number' && value >= 0 ? value : 1;\n}\n/**\n * 确保好感事件优先、且保证写入持久化：\n * - 直接在事件回调中修改传入的 variables，并置 out_is_updated = true，由宿主环境负责持久化；\n * - 若任一角色存在“待触发”的好感事件（阶段值为奇数），则本轮放弃随机事件（保证好感事件优先级）；\n * - 若当前“世界.随机事件”非“无”，放弃随机触发；否则以 45% 概率抽取并写入。\n */\n// 读取/写入 stat_data.* 的工具（优先走 Mvu，回退到 _.get/_.set）\nfunction getStatValue(variables, path, defaultValue) {\n    try {\n        if (typeof Mvu !== 'undefined') {\n            const value = Mvu.getMvuVariable(variables, path);\n            return (value === undefined ? defaultValue : value);\n        }\n    }\n    catch (_) {\n        void 0;\n    }\n    return _.get(variables, `stat_data.${path}`, defaultValue);\n}\nasync function setStatValue(variables, path, value, reason) {\n    try {\n        if (typeof Mvu !== 'undefined') {\n            await Mvu.setMvuVariable(variables, path, value, { reason });\n            return;\n        }\n    }\n    catch (_) {\n        void 0;\n    }\n    _.set(variables, `stat_data.${path}`, value);\n}\nasync function tryTriggerRandomEvent(variables, _out_is_updated) {\n    try {\n        // 初始化完成判定：仅当“伪娘魔法少女”已初始化时才启用随机事件抽取\n        const initializedList = _.get(variables, 'initialized_lorebooks', []);\n        const isInitialized = Array.isArray(initializedList) && initializedList.includes('伪娘魔法少女');\n        if (!isInitialized) {\n            return;\n        }\n        // 若存在“好感事件待触发”（阶段为奇数），优先让好感事件占用，跳过本次随机触发\n        const affectionStages = _.get(variables, 'tavern_helper.affection_events.stage', {});\n        const hasPendingAffection = affectionStages &&\n            typeof affectionStages === 'object' &&\n            Object.values(affectionStages).some(v => typeof v === 'number' && v > 0 && v % 2 !== 0);\n        if (hasPendingAffection) {\n            return;\n        }\n        const currentEvent = getStatValue(variables, '世界.随机事件[0]', '无');\n        // 读写脚本域状态（用于避免随机事件连发）：至少间隔一条回复\n        const svars = getVariables({ type: 'script', script_id: getScriptId() });\n        const cooldownTotal = getCooldownReplies(svars);\n        const lastEventName = _.get(svars, `${RANDOM_EVENT_STATE_ROOT}.上次事件名`, '无');\n        let cooldownRemaining = _.get(svars, `${RANDOM_EVENT_STATE_ROOT}.冷却剩余回复数`, 0);\n        let skipThisRound = false;\n        // 若上一轮非“无”，当前为“无”，说明事件刚结束 → 启动冷却\n        if (lastEventName !== '无' && currentEvent === '无') {\n            // 刚结束一条事件：本条回复启用冷却并跳过触发\n            cooldownRemaining = Math.max(0, cooldownTotal - 1);\n            skipThisRound = true;\n        }\n        else if (cooldownRemaining > 0) {\n            // 冷却中：本轮递减并跳过随机事件\n            cooldownRemaining = Math.max(0, cooldownRemaining - 1);\n            skipThisRound = true;\n        }\n        // 更新脚本域状态（记录上次事件名与冷却剩余）\n        _.set(svars, `${RANDOM_EVENT_STATE_ROOT}.上次事件名`, currentEvent);\n        _.set(svars, `${RANDOM_EVENT_STATE_ROOT}.冷却剩余回复数`, cooldownRemaining);\n        await replaceVariables(svars, { type: 'script', script_id: getScriptId() });\n        if (currentEvent !== '无') {\n            // 已被好感事件或其他系统占用，放弃本次随机触发（但仍然已记录 lastEventName）\n            return;\n        }\n        if (skipThisRound) {\n            return;\n        }\n        const currentPeriod = getCurrentPeriod(variables);\n        const currentLocation = getCurrentLocation(variables);\n        if (!currentPeriod || !currentLocation)\n            return;\n        // 获取已触发的事件列表\n        const triggeredEvents = _.get(variables, _shared_constants__WEBPACK_IMPORTED_MODULE_0__.TRIGGERED_RANDOM_EVENTS_PATH, []);\n        // 事件筛选（兼容未设置限制的事件），并排除已触发的事件\n        const availableEvents = EVENT_POOL.filter(event => {\n            if (triggeredEvents.includes(event.name)) {\n                return false; // 排除已触发的事件\n            }\n            const periodOk = !event.allowedPeriods || event.allowedPeriods.includes(currentPeriod);\n            const locationOk = !event.allowedLocations || event.allowedLocations.map(normalizeLocation).includes(currentLocation);\n            return periodOk && locationOk;\n        });\n        if (availableEvents.length === 0)\n            return;\n        // 45% 概率触发\n        const probability = 0.45;\n        if (Math.random() >= probability)\n            return;\n        // 随机选择一个事件\n        const idx = Math.floor(Math.random() * availableEvents.length);\n        const selectedEvent = availableEvents[idx];\n        // 在事件回调中直接修改传入的 variables，由宿主在回调结束时统一持久化\n        const existedTriggered = _.get(variables, _shared_constants__WEBPACK_IMPORTED_MODULE_0__.TRIGGERED_RANDOM_EVENTS_PATH, []);\n        await setStatValue(variables, '世界.随机事件[0]', selectedEvent.name, '随机事件触发');\n        _.set(variables, _shared_constants__WEBPACK_IMPORTED_MODULE_0__.TRIGGERED_RANDOM_EVENTS_PATH, _.uniq([...(Array.isArray(existedTriggered) ? existedTriggered : []), selectedEvent.name]));\n        // 标记已更新，交由宿主持久化\n        _out_is_updated = true;\n        // 事件已开始：将脚本域的上次事件名更新为本次选中事件，避免事件结束时无法识别“刚结束”\n        const svarsAfter = getVariables({ type: 'script', script_id: getScriptId() });\n        _.set(svarsAfter, `${RANDOM_EVENT_STATE_ROOT}.上次事件名`, selectedEvent.name);\n        await replaceVariables(svarsAfter, { type: 'script', script_id: getScriptId() });\n    }\n    catch (error) {\n        console.error('[随机事件触发器] 出错:', error);\n    }\n}\n// 监听变量更新完成钩子\neventOn(typeof Mvu !== 'undefined' ? Mvu.events.VARIABLE_UPDATE_ENDED : 'mag_variable_update_ended', tryTriggerRandomEvent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQzlFLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEdBQUcsdUJBQXVCLFFBQVEsRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUUsTUFBTSxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN4QyxDQUFDO0FBQ0gsQ0FBQztBQUVELGFBQWE7QUFDYixPQUFPLENBQ0wsT0FBTyxHQUFHLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQywyQkFBMkIsRUFDM0YscUJBQXFCLENBQ3RCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+maj+acuuS6i+S7tuinpuWPkS9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVFJJR0dFUkVEX1JBTkRPTV9FVkVOVFNfUEFUSCwgdXNlcktleSB9IGZyb20gJy4uL3NoYXJlZC9jb25zdGFudHMnO1xuXG50eXBlIEV2ZW50SXRlbSA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICBhbGxvd2VkUGVyaW9kcz86IHN0cmluZ1tdO1xuICBhbGxvd2VkTG9jYXRpb25zPzogc3RyaW5nW107XG59O1xuXG4vLyDkuovku7bmsaDlrprkuYlcbmNvbnN0IEVWRU5UX1BPT0w6IEV2ZW50SXRlbVtdID0gW1xuICB7IG5hbWU6ICflp5Dlp5DnmoTkuabmnrYnLCBhbGxvd2VkUGVyaW9kczogWyfkuIrljYgnLCAn5LiL5Y2IJ10sIGFsbG93ZWRMb2NhdGlvbnM6IFsne3t1c2VyfX3nmoTlrrYnXSB9LFxuICB7IG5hbWU6ICfkuI3lkKzor53nmoTlkpbllaHmnLonLCBhbGxvd2VkUGVyaW9kczogWyfkuIrljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyd7e3VzZXJ9feeahOWutiddIH0sXG4gIHsgbmFtZTogJ+iUrOiPnOeahOi9rOenuycsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4iuWNiCcsICfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyflrojmiqTmlK/pg6gnXSB9LFxuICB7IG5hbWU6ICflpKnlj7DnmoTljYjppJAnLCBhbGxvd2VkUGVyaW9kczogWyfkuIrljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICflhrDpm5UnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyd7e3VzZXJ9feeahOWutiddIH0sXG4gIHsgbmFtZTogJ+aZmumrmOWzsOeUtei9picsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+iKseS4mOmrmOS4rSddIH0sXG4gIHsgbmFtZTogJ+WbvuS5pummhueahOWuiOaKpCcsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4iuWNiCcsICfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICflh7rmtbTmhI/lpJYnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10sIGFsbG93ZWRMb2NhdGlvbnM6IFsne3t1c2VyfX3nmoTlrrYnXSB9LFxuICB7IG5hbWU6ICfnibnliKvovoXlr7wnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10sIGFsbG93ZWRMb2NhdGlvbnM6IFsn6Iqx5LiY6auY5LitJ10gfSxcbiAgeyBuYW1lOiAn6Zuo5aSp55qE5Lye5LiLJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJywgJ+aZmumXtCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+iKseS4mOmrmOS4rSddIH0sXG4gIHsgbmFtZTogJ+Wkseeqg+eahOS4neiinCcsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCcsICfmmZrpl7QnXSwgYWxsb3dlZExvY2F0aW9uczogWyd7e3VzZXJ9feeahOWutiddIH0sXG4gIHsgbmFtZTogJ+WkqeWPsOeahOWNiOedoScsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4iuWNiCcsICfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICfml6fkvKTnlqTnmoTmlYXkuosnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICflrrbluq3ppJDljoXnmoTntKfmgKXooaXkuaAnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10gfSxcbiAgeyBuYW1lOiAn6aOf5aCC55qE6ZmQ5a6a5biD5LiB5LqJ5aS65oiYJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiK5Y2IJywgJ+S4i+WNiCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+WuiOaKpOaUr+mDqCddIH0sXG4gIHsgbmFtZTogJ+i+k+aOieeahOaDqee9micsIGFsbG93ZWRMb2NhdGlvbnM6IFsne3t1c2VyfX3nmoTlrrYnXSB9LFxuICB7IG5hbWU6ICfnibnorq0nLCBhbGxvd2VkUGVyaW9kczogWyfkuIrljYgnLCAn5LiL5Y2IJ10sIGFsbG93ZWRMb2NhdGlvbnM6IFsn5a6I5oqk5pSv6YOoJ10gfSxcbiAgeyBuYW1lOiAn5L2T6IKy6K++JywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJ10sIGFsbG93ZWRMb2NhdGlvbnM6IFsn6Iqx5LiY6auY5LitJ10gfSxcbiAgeyBuYW1lOiAnVlLmuLjmiI8nLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10gfSxcbiAgeyBuYW1lOiAn5aSn5aeQ5aS055qE5oi/6Ze0JywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJywgJ+aZmumXtCddIH0sXG4gIHsgbmFtZTogJ+iiq+W8hOa5v+eahOaVmeenkeS5picsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4iuWNiCcsICfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICfov7fot6/nmoTlsI/njKsnLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10gfSxcbiAgeyBuYW1lOiAn5ZWG5Lia6KGX55qE5qmx56qXJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJywgJ+aZmumXtCddIH0sXG4gIHsgbmFtZTogJ+WFs+S6jui/h+WOu+eahOWZqeaipicsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4iuWNiCcsICfkuIvljYgnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICforq3nu4PlrqTnmoTmhI/lpJYnLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+WuiOaKpOaUr+mDqCddIH0sXG4gIHsgbmFtZTogJ+WvueWGsycsIGFsbG93ZWRMb2NhdGlvbnM6IFsn5a6I5oqk5pSv6YOoJ10gfSxcbiAgeyBuYW1lOiAn6LSt54mp5LmL5peFJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJywgJ+aZmumXtCddIH0sXG4gIHsgbmFtZTogJ+abtOiho+WupOeahOaEj+WklicsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+iKseS4mOmrmOS4rSddIH0sXG4gIHsgbmFtZTogJ+Wwj+W3t+mHjOeahOmCgOivtycsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCcsICfmmZrpl7QnXSwgYWxsb3dlZExvY2F0aW9uczogWyfoirHkuJjpq5jkuK0nXSB9LFxuICB7IG5hbWU6ICfpm6jlpJznmoTor6/kvJonLCBhbGxvd2VkUGVyaW9kczogWyfkuIvljYgnLCAn5pma6Ze0J10sIGFsbG93ZWRMb2NhdGlvbnM6IFsn6Iqx5LiY6auY5LitJ10gfSxcbiAgeyBuYW1lOiAn5aWi5L6I5ZOB5bqX55qE5o+S5puyJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiL5Y2IJywgJ+aZmumXtCddIH0sXG4gIHsgbmFtZTogJ+WVhuS4muihl+eahOiwg+aIjycsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCcsICfmmZrpl7QnXSB9LFxuICB7IG5hbWU6ICfov7fot6/nmoTlpbPmuLjlrqInIH0sXG4gIHsgbmFtZTogJ+WQjuWPsOeqgeiirScsIGFsbG93ZWRQZXJpb2RzOiBbJ+S4i+WNiCcsICfmmZrpl7QnXSB9LFxuICB7IG5hbWU6ICfpo47nuqrms6jmhI8nLCBhbGxvd2VkUGVyaW9kczogWyfkuIrljYgnLCAn5LiL5Y2IJ10sIGFsbG93ZWRMb2NhdGlvbnM6IFsn6Iqx5LiY6auY5LitJ10gfSxcbiAgeyBuYW1lOiAn576O5pyv56S+55qE57yq5pavJywgYWxsb3dlZFBlcmlvZHM6IFsn5LiK5Y2IJywgJ+S4i+WNiCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ+iKseS4mOmrmOS4rSddIH0sXG4gIHsgbmFtZTogJ+WknOmXtOWRu+WQnycsIGFsbG93ZWRQZXJpb2RzOiBbJ+aZmumXtCddLCBhbGxvd2VkTG9jYXRpb25zOiBbJ3t7dXNlcn1955qE5a62J10gfSxcbiAgeyBuYW1lOiAn6K2m5a6Y55qE5YWz5b+DJywgYWxsb3dlZFBlcmlvZHM6IFsn5pma6Ze0J10gfSxcbl07XG5cbi8vIOW3peWFt+WHveaVsFxuZnVuY3Rpb24gbm9ybWFsaXplTG9jYXRpb24obG9jOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbG9jLnJlcGxhY2UoL3t7dXNlcn19L2csIHVzZXJLZXkpO1xufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50UGVyaW9kKHZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBfLmdldCh2YXJpYWJsZXMsICdzdGF0X2RhdGEu5LiW55WMLuaXtuautVswXScpO1xufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24odmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIF8uZ2V0KHZhcmlhYmxlcywgYHN0YXRfZGF0YS4ke3VzZXJLZXl9LuWcsOeCuVswXWApO1xufVxuXG4vLyDohJrmnKzln5/phY3nva7kuI7nirbmgIFcbmNvbnN0IFJBTkRPTV9FVkVOVF9DT05GSUdfUk9PVCA9ICfpmo/mnLrkuovku7bop6blj5Hlmagu6YWN572uJztcbmNvbnN0IFJBTkRPTV9FVkVOVF9TVEFURV9ST09UID0gJ+maj+acuuS6i+S7tuinpuWPkeWZqC7nirbmgIEnO1xuXG5mdW5jdGlvbiBnZXRDb29sZG93blJlcGxpZXMoc2NyaXB0VmFyczogUmVjb3JkPHN0cmluZywgYW55Pik6IG51bWJlciB7XG4gIGNvbnN0IHZhbHVlID0gXy5nZXQoc2NyaXB0VmFycywgYCR7UkFORE9NX0VWRU5UX0NPTkZJR19ST09UfS7lhrfljbTlm57lpI3mlbBgLCAxKTtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdmFsdWUgPj0gMCA/IHZhbHVlIDogMTtcbn1cblxuLyoqXG4gKiDnoa7kv53lpb3mhJ/kuovku7bkvJjlhYjjgIHkuJTkv53or4HlhpnlhaXmjIHkuYXljJbvvJpcbiAqIC0g55u05o6l5Zyo5LqL5Lu25Zue6LCD5Lit5L+u5pS55Lyg5YWl55qEIHZhcmlhYmxlc++8jOW5tue9riBvdXRfaXNfdXBkYXRlZCA9IHRydWXvvIznlLHlrr/kuLvnjq/looPotJ/otKPmjIHkuYXljJbvvJtcbiAqIC0g6Iul5Lu75LiA6KeS6Imy5a2Y5Zyo4oCc5b6F6Kem5Y+R4oCd55qE5aW95oSf5LqL5Lu277yI6Zi25q615YC85Li65aWH5pWw77yJ77yM5YiZ5pys6L2u5pS+5byD6ZqP5py65LqL5Lu277yI5L+d6K+B5aW95oSf5LqL5Lu25LyY5YWI57qn77yJ77ybXG4gKiAtIOiLpeW9k+WJjeKAnOS4lueVjC7pmo/mnLrkuovku7bigJ3pnZ7igJzml6DigJ3vvIzmlL7lvIPpmo/mnLrop6blj5HvvJvlkKbliJnku6UgNDUlIOamgueOh+aKveWPluW5tuWGmeWFpeOAglxuICovXG4vLyDor7vlj5Yv5YaZ5YWlIHN0YXRfZGF0YS4qIOeahOW3peWFt++8iOS8mOWFiOi1sCBNdnXvvIzlm57pgIDliLAgXy5nZXQvXy5zZXTvvIlcbmZ1bmN0aW9uIGdldFN0YXRWYWx1ZTxUID0gYW55Pih2YXJpYWJsZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sIHBhdGg6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogVCk6IFQge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2YgTXZ1ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgdmFsdWUgPSBNdnUuZ2V0TXZ1VmFyaWFibGUodmFyaWFibGVzIGFzIGFueSwgcGF0aCk7XG4gICAgICByZXR1cm4gKHZhbHVlID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiB2YWx1ZSkgYXMgVDtcbiAgICB9XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIF8uZ2V0KHZhcmlhYmxlcywgYHN0YXRfZGF0YS4ke3BhdGh9YCwgZGVmYXVsdFZhbHVlKSBhcyBUO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXRTdGF0VmFsdWUodmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnksIHJlYXNvbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2YgTXZ1ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgYXdhaXQgTXZ1LnNldE12dVZhcmlhYmxlKHZhcmlhYmxlcyBhcyBhbnksIHBhdGgsIHZhbHVlLCB7IHJlYXNvbiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICB2b2lkIDA7XG4gIH1cbiAgXy5zZXQodmFyaWFibGVzLCBgc3RhdF9kYXRhLiR7cGF0aH1gLCB2YWx1ZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRyeVRyaWdnZXJSYW5kb21FdmVudCh2YXJpYWJsZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sIF9vdXRfaXNfdXBkYXRlZD86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyDliJ3lp4vljJblrozmiJDliKTlrprvvJrku4XlvZPigJzkvKrlqJjprZTms5XlsJHlpbPigJ3lt7LliJ3lp4vljJbml7bmiY3lkK/nlKjpmo/mnLrkuovku7bmir3lj5ZcbiAgICBjb25zdCBpbml0aWFsaXplZExpc3QgPSBfLmdldCh2YXJpYWJsZXMsICdpbml0aWFsaXplZF9sb3JlYm9va3MnLCBbXSBhcyBzdHJpbmdbXSk7XG4gICAgY29uc3QgaXNJbml0aWFsaXplZCA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbGl6ZWRMaXN0KSAmJiBpbml0aWFsaXplZExpc3QuaW5jbHVkZXMoJ+S8quWomOmtlOazleWwkeWlsycpO1xuICAgIGlmICghaXNJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOiLpeWtmOWcqOKAnOWlveaEn+S6i+S7tuW+heinpuWPkeKAne+8iOmYtuauteS4uuWlh+aVsO+8ie+8jOS8mOWFiOiuqeWlveaEn+S6i+S7tuWNoOeUqO+8jOi3s+i/h+acrOasoemaj+acuuinpuWPkVxuICAgIGNvbnN0IGFmZmVjdGlvblN0YWdlcyA9IF8uZ2V0KHZhcmlhYmxlcywgJ3RhdmVybl9oZWxwZXIuYWZmZWN0aW9uX2V2ZW50cy5zdGFnZScsIHt9IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pO1xuICAgIGNvbnN0IGhhc1BlbmRpbmdBZmZlY3Rpb24gPVxuICAgICAgYWZmZWN0aW9uU3RhZ2VzICYmXG4gICAgICB0eXBlb2YgYWZmZWN0aW9uU3RhZ2VzID09PSAnb2JqZWN0JyAmJlxuICAgICAgT2JqZWN0LnZhbHVlcyhhZmZlY3Rpb25TdGFnZXMpLnNvbWUodiA9PiB0eXBlb2YgdiA9PT0gJ251bWJlcicgJiYgdiA+IDAgJiYgdiAlIDIgIT09IDApO1xuICAgIGlmIChoYXNQZW5kaW5nQWZmZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudEV2ZW50ID0gZ2V0U3RhdFZhbHVlPHN0cmluZz4odmFyaWFibGVzLCAn5LiW55WMLumaj+acuuS6i+S7tlswXScsICfml6AnKTtcblxuICAgIC8vIOivu+WGmeiEmuacrOWfn+eKtuaAge+8iOeUqOS6jumBv+WFjemaj+acuuS6i+S7tui/nuWPke+8ie+8muiHs+WwkemXtOmalOS4gOadoeWbnuWkjVxuICAgIGNvbnN0IHN2YXJzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ3NjcmlwdCcsIHNjcmlwdF9pZDogZ2V0U2NyaXB0SWQoKSB9KTtcbiAgICBjb25zdCBjb29sZG93blRvdGFsID0gZ2V0Q29vbGRvd25SZXBsaWVzKHN2YXJzKTtcbiAgICBjb25zdCBsYXN0RXZlbnROYW1lOiBzdHJpbmcgPSBfLmdldChzdmFycywgYCR7UkFORE9NX0VWRU5UX1NUQVRFX1JPT1R9LuS4iuasoeS6i+S7tuWQjWAsICfml6AnKTtcbiAgICBsZXQgY29vbGRvd25SZW1haW5pbmc6IG51bWJlciA9IF8uZ2V0KHN2YXJzLCBgJHtSQU5ET01fRVZFTlRfU1RBVEVfUk9PVH0u5Ya35Y205Ymp5L2Z5Zue5aSN5pWwYCwgMCk7XG5cbiAgICBsZXQgc2tpcFRoaXNSb3VuZCA9IGZhbHNlO1xuICAgIC8vIOiLpeS4iuS4gOi9rumdnuKAnOaXoOKAne+8jOW9k+WJjeS4uuKAnOaXoOKAne+8jOivtOaYjuS6i+S7tuWImue7k+adnyDihpIg5ZCv5Yqo5Ya35Y20XG4gICAgaWYgKGxhc3RFdmVudE5hbWUgIT09ICfml6AnICYmIGN1cnJlbnRFdmVudCA9PT0gJ+aXoCcpIHtcbiAgICAgIC8vIOWImue7k+adn+S4gOadoeS6i+S7tu+8muacrOadoeWbnuWkjeWQr+eUqOWGt+WNtOW5tui3s+i/h+inpuWPkVxuICAgICAgY29vbGRvd25SZW1haW5pbmcgPSBNYXRoLm1heCgwLCBjb29sZG93blRvdGFsIC0gMSk7XG4gICAgICBza2lwVGhpc1JvdW5kID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGNvb2xkb3duUmVtYWluaW5nID4gMCkge1xuICAgICAgLy8g5Ya35Y205Lit77ya5pys6L2u6YCS5YeP5bm26Lez6L+H6ZqP5py65LqL5Lu2XG4gICAgICBjb29sZG93blJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGNvb2xkb3duUmVtYWluaW5nIC0gMSk7XG4gICAgICBza2lwVGhpc1JvdW5kID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyDmm7TmlrDohJrmnKzln5/nirbmgIHvvIjorrDlvZXkuIrmrKHkuovku7blkI3kuI7lhrfljbTliankvZnvvIlcbiAgICBfLnNldChzdmFycywgYCR7UkFORE9NX0VWRU5UX1NUQVRFX1JPT1R9LuS4iuasoeS6i+S7tuWQjWAsIGN1cnJlbnRFdmVudCk7XG4gICAgXy5zZXQoc3ZhcnMsIGAke1JBTkRPTV9FVkVOVF9TVEFURV9ST09UfS7lhrfljbTliankvZnlm57lpI3mlbBgLCBjb29sZG93blJlbWFpbmluZyk7XG4gICAgYXdhaXQgcmVwbGFjZVZhcmlhYmxlcyhzdmFycywgeyB0eXBlOiAnc2NyaXB0Jywgc2NyaXB0X2lkOiBnZXRTY3JpcHRJZCgpIH0pO1xuXG4gICAgaWYgKGN1cnJlbnRFdmVudCAhPT0gJ+aXoCcpIHtcbiAgICAgIC8vIOW3suiiq+WlveaEn+S6i+S7tuaIluWFtuS7luezu+e7n+WNoOeUqO+8jOaUvuW8g+acrOasoemaj+acuuinpuWPke+8iOS9huS7jeeEtuW3suiusOW9lSBsYXN0RXZlbnROYW1l77yJXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNraXBUaGlzUm91bmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50UGVyaW9kID0gZ2V0Q3VycmVudFBlcmlvZCh2YXJpYWJsZXMpO1xuICAgIGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IGdldEN1cnJlbnRMb2NhdGlvbih2YXJpYWJsZXMpO1xuICAgIGlmICghY3VycmVudFBlcmlvZCB8fCAhY3VycmVudExvY2F0aW9uKSByZXR1cm47XG5cbiAgICAvLyDojrflj5blt7Lop6blj5HnmoTkuovku7bliJfooahcbiAgICBjb25zdCB0cmlnZ2VyZWRFdmVudHM6IHN0cmluZ1tdID0gXy5nZXQodmFyaWFibGVzLCBUUklHR0VSRURfUkFORE9NX0VWRU5UU19QQVRILCBbXSk7XG5cbiAgICAvLyDkuovku7bnrZvpgInvvIjlhbzlrrnmnKrorr7nva7pmZDliLbnmoTkuovku7bvvInvvIzlubbmjpLpmaTlt7Lop6blj5HnmoTkuovku7ZcbiAgICBjb25zdCBhdmFpbGFibGVFdmVudHMgPSBFVkVOVF9QT09MLmZpbHRlcihldmVudCA9PiB7XG4gICAgICBpZiAodHJpZ2dlcmVkRXZlbnRzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8g5o6S6Zmk5bey6Kem5Y+R55qE5LqL5Lu2XG4gICAgICB9XG4gICAgICBjb25zdCBwZXJpb2RPayA9ICFldmVudC5hbGxvd2VkUGVyaW9kcyB8fCBldmVudC5hbGxvd2VkUGVyaW9kcy5pbmNsdWRlcyhjdXJyZW50UGVyaW9kKTtcbiAgICAgIGNvbnN0IGxvY2F0aW9uT2sgPVxuICAgICAgICAhZXZlbnQuYWxsb3dlZExvY2F0aW9ucyB8fCBldmVudC5hbGxvd2VkTG9jYXRpb25zLm1hcChub3JtYWxpemVMb2NhdGlvbikuaW5jbHVkZXMoY3VycmVudExvY2F0aW9uKTtcbiAgICAgIHJldHVybiBwZXJpb2RPayAmJiBsb2NhdGlvbk9rO1xuICAgIH0pO1xuXG4gICAgaWYgKGF2YWlsYWJsZUV2ZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIC8vIDQ1JSDmpoLnjofop6blj5FcbiAgICBjb25zdCBwcm9iYWJpbGl0eSA9IDAuNDU7XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPj0gcHJvYmFiaWxpdHkpIHJldHVybjtcblxuICAgIC8vIOmaj+acuumAieaLqeS4gOS4quS6i+S7tlxuICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZUV2ZW50cy5sZW5ndGgpO1xuICAgIGNvbnN0IHNlbGVjdGVkRXZlbnQgPSBhdmFpbGFibGVFdmVudHNbaWR4XTtcblxuICAgIC8vIOWcqOS6i+S7tuWbnuiwg+S4reebtOaOpeS/ruaUueS8oOWFpeeahCB2YXJpYWJsZXPvvIznlLHlrr/kuLvlnKjlm57osIPnu5PmnZ/ml7bnu5/kuIDmjIHkuYXljJZcbiAgICBjb25zdCBleGlzdGVkVHJpZ2dlcmVkOiBzdHJpbmdbXSA9IF8uZ2V0KHZhcmlhYmxlcywgVFJJR0dFUkVEX1JBTkRPTV9FVkVOVFNfUEFUSCwgW10pO1xuICAgIGF3YWl0IHNldFN0YXRWYWx1ZSh2YXJpYWJsZXMsICfkuJbnlYwu6ZqP5py65LqL5Lu2WzBdJywgc2VsZWN0ZWRFdmVudC5uYW1lLCAn6ZqP5py65LqL5Lu26Kem5Y+RJyk7XG4gICAgXy5zZXQoXG4gICAgICB2YXJpYWJsZXMsXG4gICAgICBUUklHR0VSRURfUkFORE9NX0VWRU5UU19QQVRILFxuICAgICAgXy51bmlxKFsuLi4oQXJyYXkuaXNBcnJheShleGlzdGVkVHJpZ2dlcmVkKSA/IGV4aXN0ZWRUcmlnZ2VyZWQgOiBbXSksIHNlbGVjdGVkRXZlbnQubmFtZV0pLFxuICAgICk7XG4gICAgLy8g5qCH6K6w5bey5pu05paw77yM5Lqk55Sx5a6/5Li75oyB5LmF5YyWXG4gICAgX291dF9pc191cGRhdGVkID0gdHJ1ZTtcblxuICAgIC8vIOS6i+S7tuW3suW8gOWni++8muWwhuiEmuacrOWfn+eahOS4iuasoeS6i+S7tuWQjeabtOaWsOS4uuacrOasoemAieS4reS6i+S7tu+8jOmBv+WFjeS6i+S7tue7k+adn+aXtuaXoOazleivhuWIq+KAnOWImue7k+adn+KAnVxuICAgIGNvbnN0IHN2YXJzQWZ0ZXIgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnc2NyaXB0Jywgc2NyaXB0X2lkOiBnZXRTY3JpcHRJZCgpIH0pO1xuICAgIF8uc2V0KHN2YXJzQWZ0ZXIsIGAke1JBTkRPTV9FVkVOVF9TVEFURV9ST09UfS7kuIrmrKHkuovku7blkI1gLCBzZWxlY3RlZEV2ZW50Lm5hbWUpO1xuICAgIGF3YWl0IHJlcGxhY2VWYXJpYWJsZXMoc3ZhcnNBZnRlciwgeyB0eXBlOiAnc2NyaXB0Jywgc2NyaXB0X2lkOiBnZXRTY3JpcHRJZCgpIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1vpmo/mnLrkuovku7bop6blj5HlmahdIOWHuumUmTonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8g55uR5ZCs5Y+Y6YeP5pu05paw5a6M5oiQ6ZKp5a2QXG5ldmVudE9uKFxuICB0eXBlb2YgTXZ1ICE9PSAndW5kZWZpbmVkJyA/IE12dS5ldmVudHMuVkFSSUFCTEVfVVBEQVRFX0VOREVEIDogJ21hZ192YXJpYWJsZV91cGRhdGVfZW5kZWQnLFxuICB0cnlUcmlnZ2VyUmFuZG9tRXZlbnQsXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/随机事件触发/index.ts\n\n}");
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/随机事件触发/index.ts");